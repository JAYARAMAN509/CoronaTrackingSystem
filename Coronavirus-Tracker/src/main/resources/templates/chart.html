<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insert title here</title>
<link href=https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>
<script>
$(document).ready(function(){
	
	var url="http://localhost:8082/chartfile?"

$.getJSON(url,function(data){
	
	
	console.log(data)
	
	var country=[]
	
	var latestTotalDeaths=[]
	
	$.each(data,function(id,obj){
		country.push(obj.country)
		latestTotalDeaths.push(obj.latestTotalDeaths)
	})
	console.log(country)
	
	var myChart=document.getElementById("myChart").getContext('2d')
	
	var chart=new Chart(myChart,{
		type:'line',
		data:{
			labels:country,
			datasets:[
				{
					label:"Total Deaths",
					data:latestTotalDeaths,
					backgroundColor:"red",
					minBarLength:200
				}
				
			]
			
		},
		options:{
			title:{
				display:true,
				text:"Corona Death Count Live"
			}
		}
	})
})
})
</script>
</head>
<body>
<form th:action="@{/map}">
   <button class="btn btn-primary" type="submit"> ></button></h1>
    </form>
<div class="container my-5">
<div class="row ">
<div class="col-3 text-danger badge badge-secondary  ">
<span class="spinner-grow spinner-grow-sm "></span><h5>Live</h5>
</div>

</div>
<canvas id="myChart"></canvas>
</div>
</body>


</html>